<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory PBFT</title>
</head>


<body>
<div class="head">
<h1>Theory PBFT</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="PBFT.html"><span>PBFT</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../../HOL/HOL/Main.html"><span>Main</span></a><span> </span><span class="quoted"><span>"</span><a href="HOL-Eisbach.Eisbach.html"><span>HOL-Eisbach.Eisbach</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>                                 
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.rewrite_funs.rewrite_funs|method"><span>method</span></span></span></span><span> </span><span class="entity_def" id="PBFT.rewrite_funs|method"><span>rewrite_funs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="quasi_keyword"><span>no_asm_use</span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_apply|fact"><span>fun_upd_apply</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="comment1"><span>― ‹rewrites function-update and function equality terms to first-order equality.›</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"First-Order Abstraction"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.byz_quorums.intro|fact"><span class="entity_def" id="PBFT.byz_quorums_def|fact"><span class="entity_def" id="PBFT.byz_quorums.intro|thm"><span class="entity_def" id="PBFT.byz_quorums_def|thm"><span class="entity_def" id="PBFT.byz_quorums_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="PBFT.byz_quorums|locale"><span class="entity_def" id="PBFT.byz_quorums|const"><span>byz_quorums</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>byz_member</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'n</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'q1</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span class="keyword1"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>is_good</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'n</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>good_member</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'n</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'q2</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span class="keyword1"><span>∈<span class="hidden">⇩</span><sub>g</sub></span></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>g</sub></span></span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>is_good</span></span><span> </span><span class="bound"><span>n</span></span><span>"</span></span></span><span> 
      </span><span class="comment1"><span>― ‹good quorums contain only good nodes›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>q1</span></span><span> </span><span class="bound"><span>q2</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>g</sub></span></span></span><span> </span><span class="bound"><span>q1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>g</sub></span></span></span><span> </span><span class="bound"><span>q2</span></span><span>"</span></span></span><span> 
      </span><span class="comment1"><span>― ‹good quorums intersect›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>q1</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>q2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>g</sub></span></span></span><span> </span><span class="bound"><span>q2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="bound"><span>q1</span></span><span>"</span></span></span><span> 
      </span><span class="comment1"><span>― ‹every byz quorum contains at least one good quorum›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.axioms|fact"><span class="entity_def" id="PBFT.fol_bft.intro|fact"><span class="entity_def" id="PBFT.fol_bft_def|fact"><span class="entity_def" id="PBFT.fol_bft.axioms(2)|thm"><span class="entity_def" id="PBFT.fol_bft.axioms(1)|thm"><span class="entity_def" id="PBFT.fol_bft.intro|thm"><span class="entity_def" id="PBFT.fol_bft_def|thm"><span class="entity_def" id="PBFT.fol_bft_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="PBFT.fol_bft|locale"><span class="entity_def" id="PBFT.fol_bft|const"><span class="entity_def" id="offset_767..774">fol_bft</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="PBFT.html#PBFT.byz_quorums|locale"><span>byz_quorums</span></a><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|locale"><span>linorder</span></a><span> </span><span class="quoted"><span class="free"><span>less_eq</span></span></span><span> </span><span class="quoted"><span class="free"><span>less</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span>
  </span><span class="free"><span>less_eq</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'r</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'r</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>≤</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>less</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>&lt;</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>bot</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'r</span></span></span></span><span>
  </span><span class="comment1"><span>― ‹the special bottom round›</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>no_notation</span></span></span><span> 
  </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>ord_class.less_eq</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>op</span></span><span> </span><span class="keyword1"><span>≤</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>ord_class.less_eq</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>≤</span></span><span> _</span><span class="keyword3"><span>)</span></span><span>"</span></span><span>  </span><span class="main"><span>[</span></span><span>51</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>ord_class.less</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>op</span></span><span> </span><span class="keyword1"><span>&lt;</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>ord_class.less</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>&lt;</span></span><span> _</span><span class="keyword3"><span>)</span></span><span>"</span></span><span>  </span><span class="main"><span>[</span></span><span>51</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>Set.member</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>op</span></span><span> </span><span class="keyword1"><span>∈</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>Set.member</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>∈</span></span><span> _</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>51</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> 
  </span><span class="comment1"><span>― ‹checking for inconsistent hypothesis›</span></span><span>
  </span><span class="keyword1"><span class="command"><span>nitpick</span></span></span><span class="main"><span>[</span></span><span>expect</span><span class="main"><span>=</span></span><span>genuine</span><span class="main"><span>,</span></span><span> verbose</span><span class="main"><span>=</span></span><span>true</span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>oops</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms|fact"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(8)|thm"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(7)|thm"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(6)|thm"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(5)|thm"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(4)|thm"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(3)|thm"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(2)|thm"><span class="entity_def" id="PBFT.fol_bft.fol_bft_assms(1)|thm"><span class="entity_def" id="offset_1293..1306">fol_bft_assms</span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="PBFT.html#offset_767..774"><span>fol_bft_axioms</span></a><span> </span><a class="entity_ref" href="PBFT.html#PBFT.fol_bft_def|fact"><span>fol_bft_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.class.linorder_def|fact"><span>class.linorder_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.class.order_def|fact"><span>class.order_def</span></a><span>
    </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.class.preorder_def|fact"><span>class.preorder_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.class.order_axioms_def|fact"><span>class.order_axioms_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.class.linorder_axioms_def|fact"><span>class.linorder_axioms_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#PBFT.byz_quorums_def|fact"><span>byz_quorums_def</span></a><span>
  
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Abstract PBFT Model"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"We use propose messages to verify 1b messages as in Lamport's version of PBFT.
We do not model pre-prepare messages."</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="PBFT.html#PBFT.fol_bft|locale"><span>fol_bft</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.byz_send_def|fact"><span class="entity_def" id="PBFT.fol_bft.byz_send_def|thm"><span class="entity_def" id="PBFT.fol_bft.byz_send_def_raw|axiom"><span class="entity_def" id="offset_1652..1662">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.byz_send.cong|fact"><span class="entity_def" id="PBFT.fol_bft.byz_send.cong|thm"><span class="entity_def" id="PBFT.fol_bft.byz_send|const"><span class="entity_def" id="offset_1663..1671">byz_send</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹byzantine nodes can do anything but impersonate non-byz nodes›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>byz_send</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span>
      </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>is_good</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span>
      </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.join_round_def|fact"><span class="entity_def" id="PBFT.fol_bft.join_round_def|thm"><span class="entity_def" id="PBFT.fol_bft.join_round_def_raw|axiom"><span class="entity_def" id="offset_2057..2067">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.join_round.cong|fact"><span class="entity_def" id="PBFT.fol_bft.join_round.cong|thm"><span class="entity_def" id="PBFT.fol_bft.join_round|const"><span class="entity_def" id="offset_2068..2078">join_round</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>join_round</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span>
      </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>bot</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n'</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="bound"><span>n'</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="bound"><span>n'</span></span><span> </span><span class="bound"><span>r'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><span class="free"><span>&lt;</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.propose_def|fact"><span class="entity_def" id="PBFT.fol_bft.propose_def|thm"><span class="entity_def" id="PBFT.fol_bft.propose_def_raw|axiom"><span class="entity_def" id="offset_2528..2538">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.propose.cong|fact"><span class="entity_def" id="PBFT.fol_bft.propose.cong|thm"><span class="entity_def" id="PBFT.fol_bft.propose|const"><span class="entity_def" id="offset_2539..2546">propose</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>propose</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span>
      </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>bot</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>
        </span><span class="main"><span>(</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><span class="free"><span>&lt;</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>rmax</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>rmax</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>bot</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>rmax</span></span><span> </span><span class="main"><span class="free"><span>&lt;</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>rmax</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><span class="free"><span>&lt;</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><span class="free"><span>≤</span></span></span><span> </span><span class="bound"><span>rmax</span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>is_good</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>rmax</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>)</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.vote_def|fact"><span class="entity_def" id="PBFT.fol_bft.vote_def|thm"><span class="entity_def" id="PBFT.fol_bft.vote_def_raw|axiom"><span class="entity_def" id="offset_3299..3309">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.vote.cong|fact"><span class="entity_def" id="PBFT.fol_bft.vote.cong|thm"><span class="entity_def" id="PBFT.fol_bft.vote|const"><span class="entity_def" id="offset_3310..3314">vote</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vote</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span>
      </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>bot</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span>"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.trans_def|fact"><span class="entity_def" id="PBFT.fol_bft.trans_def|thm"><span class="entity_def" id="PBFT.fol_bft.trans_def_raw|axiom"><span class="entity_def" id="offset_3750..3760">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.trans.cong|fact"><span class="entity_def" id="PBFT.fol_bft.trans.cong|thm"><span class="entity_def" id="PBFT.fol_bft.trans|const"><span class="entity_def" id="offset_3761..3766">trans</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>trans</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
      </span><a class="entity_ref" href="PBFT.html#offset_2068..2078"><span>join_round</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="PBFT.html#offset_2539..2546"><span>propose</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="PBFT.html#offset_3310..3314"><span>vote</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="PBFT.html#offset_1663..1671"><span>byz_send</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round'</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Auxiliary Invariants and Safety Property"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.inv1_def|fact"><span class="entity_def" id="PBFT.fol_bft.inv1_def|thm"><span class="entity_def" id="PBFT.fol_bft.inv1_def_raw|axiom"><span class="entity_def" id="offset_4532..4542">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.inv1.cong|fact"><span class="entity_def" id="PBFT.fol_bft.inv1.cong|thm"><span class="entity_def" id="PBFT.fol_bft.inv1|const"><span class="entity_def" id="offset_4543..4547">inv1</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv1</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>is_good</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="main"><span class="free"><span>&lt;</span></span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>is_good</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>g</sub></span></span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>is_good</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.choosable_inv_def|fact"><span class="entity_def" id="PBFT.fol_bft.choosable_inv_def|thm"><span class="entity_def" id="PBFT.fol_bft.choosable_inv_def_raw|axiom"><span class="entity_def" id="offset_4848..4858">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.choosable_inv.cong|fact"><span class="entity_def" id="PBFT.fol_bft.choosable_inv.cong|thm"><span class="entity_def" id="PBFT.fol_bft.choosable_inv|const"><span class="entity_def" id="offset_4859..4872">choosable_inv</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>choosable_inv</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>r1</span></span><span> </span><span class="bound"><span>r2</span></span><span> </span><span class="bound"><span>v1</span></span><span> </span><span class="bound"><span>v2</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>r1</span></span><span> </span><span class="main"><span class="free"><span>&lt;</span></span></span><span> </span><span class="bound"><span>r2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>is_good</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r2</span></span><span> </span><span class="bound"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span>
        </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>q2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>n2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>n2</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>g</sub></span></span></span><span> </span><span class="bound"><span>q2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="bound"><span>n2</span></span><span> </span><span class="bound"><span>r1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n2</span></span><span> </span><span class="bound"><span>r1</span></span><span> </span><span class="bound"><span>v1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PBFT.fol_bft.safety_def|fact"><span class="entity_def" id="PBFT.fol_bft.safety_def|thm"><span class="entity_def" id="PBFT.fol_bft.safety_def_raw|axiom"><span class="entity_def" id="offset_5106..5116">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PBFT.fol_bft.safety.cong|fact"><span class="entity_def" id="PBFT.fol_bft.safety.cong|thm"><span class="entity_def" id="PBFT.fol_bft.safety|const"><span class="entity_def" id="offset_5117..5123">safety</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>safety</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>proposal</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>start_round_msg</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>left_round</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>joined_round</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="bound"><span>q'</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span class="free"><span>∈<span class="hidden">⇩</span><sub>b</sub></span></span></span><span> </span><span class="bound"><span>q'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>vote_msg</span></span></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>r'</span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v'</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Safety proof"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5335..5340">lemma</span></span></span><span> </span><span class="entity_def" id="PBFT.fol_bft.inv1|fact"><span class="entity_def" id="PBFT.fol_bft.inv1|thm"><span>inv1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_4543..4547"><span>inv1</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_3761..3766"><span>trans</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span> 
      </span><span class="free"><span>vote_msg'</span></span><span> </span><span class="free"><span>proposal'</span></span><span> </span><span class="free"><span>start_round_msg'</span></span><span> </span><span class="free"><span>left_round'</span></span><span> </span><span class="free"><span>joined_round'</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>q</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_4543..4547"><span>inv1</span></a><span> </span><span class="free"><span>vote_msg'</span></span><span> </span><span class="free"><span>proposal'</span></span><span> </span><span class="free"><span>start_round_msg'</span></span><span> </span><span class="free"><span>left_round'</span></span><span> </span><span class="free"><span>joined_round'</span></span><span>"</span></span></span><span>
  </span><span class="comment1"><span>(*&lt;*)</span></span><span> </span><span class="comment1"><span>(* nitpick[card 'a=5, card 'd=5, card 'e=2, card 'c=2, card 'b=2, expect=none] *)</span></span><span> </span><span class="comment1"><span>(*&gt;*)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="PBFT.html#offset_5335..5340"><span>assms</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_767..774"><span>fol_bft_axioms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PBFT.html#offset_3750..3760"><span>trans_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_4532..4542"><span>inv1_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_1652..1662"><span>byz_send_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_2057..2067"><span>join_round_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_2528..2538"><span>propose_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_3299..3309"><span>vote_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_1293..1306"><span>fol_bft_assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="PBFT.html#PBFT.rewrite_funs|method"><span class="operator"><span>rewrite_funs</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5914..5919">lemma</span></span></span><span> </span><span class="entity_def" id="PBFT.fol_bft.choosable|fact"><span class="entity_def" id="PBFT.fol_bft.choosable|thm"><span>choosable</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_4543..4547"><span>inv1</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_4859..4872"><span>choosable_inv</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_3761..3766"><span>trans</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span> 
      </span><span class="free"><span>vote_msg'</span></span><span> </span><span class="free"><span>proposal'</span></span><span> </span><span class="free"><span>start_round_msg'</span></span><span> </span><span class="free"><span>left_round'</span></span><span> </span><span class="free"><span>joined_round'</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>q</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_4859..4872"><span>choosable_inv</span></a><span> </span><span class="free"><span>vote_msg'</span></span><span> </span><span class="free"><span>proposal'</span></span><span> </span><span class="free"><span>start_round_msg'</span></span><span> </span><span class="free"><span>left_round'</span></span><span> </span><span class="free"><span>joined_round'</span></span><span>"</span></span></span><span>
  </span><span class="comment1"><span>(*&lt;*)</span></span><span> </span><span class="comment1"><span>(* nitpick[card 'a=5, card 'd=4, card 'e=2, card 'c=2, card 'b=2, expect=none, timeout=300] *)</span></span><span> </span><span class="comment1"><span>(*&gt;*)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="PBFT.html#offset_5914..5919"><span>assms</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_767..774"><span>fol_bft_axioms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PBFT.html#offset_3750..3760"><span>trans_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_4532..4542"><span>inv1_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_1652..1662"><span>byz_send_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_2057..2067"><span>join_round_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_2528..2538"><span>propose_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_3299..3309"><span>vote_def</span></a><span>
    </span><a class="entity_ref" href="PBFT.html#offset_1293..1306"><span>fol_bft_assms</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_4848..4858"><span>choosable_inv_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="PBFT.html#PBFT.rewrite_funs|method"><span class="operator"><span>rewrite_funs</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6618..6623">lemma</span></span></span><span> </span><span class="entity_def" id="PBFT.fol_bft.safety|fact"><span class="entity_def" id="PBFT.fol_bft.safety|thm"><span>safety</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_4543..4547"><span>inv1</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_4859..4872"><span>choosable_inv</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PBFT.html#offset_5117..5123"><span>safety</span></a><span> </span><span class="free"><span>vote_msg</span></span><span> </span><span class="free"><span>proposal</span></span><span> </span><span class="free"><span>start_round_msg</span></span><span> </span><span class="free"><span>left_round</span></span><span> </span><span class="free"><span>joined_round</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="PBFT.html#offset_6618..6623"><span>assms</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_767..774"><span>fol_bft_axioms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PBFT.html#offset_5106..5116"><span>safety_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_4532..4542"><span>inv1_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_4848..4858"><span>choosable_inv_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_4848..4858"><span>choosable_inv_def</span></a><span> </span><a class="entity_ref" href="PBFT.html#offset_1293..1306"><span>fol_bft_assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
  
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>